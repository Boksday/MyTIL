
# 개념정리

## 프레임워크
- 사전적 의미로는 뼈대 혹은 틀
- 장점 
	- **빠른 구현 시간**
	- **쉬운 관리**
	- **개발자들의 역량 획일화**
	- **검증된 아키텍처의 재사용과 일관성 유지**

- 특징
	- 경량
	- 제어의 역행(Inverse of Control)
	- 관점지향 프로그래밍(AOP)
	- 컨테이너

- POJO(Plane Old Java Object) : 옛날 자바 객체

## IoC(Inverse of Control)
- 제어의 역행
- 스프링 프레임워크의 가장 중요한 특징
- 객체의 생성과 의존관계를 컨테이너가 자동으로 관리
- 컨테이너가 관리함으로써 자연스럽게 의존성이 떨어짐

## Insection
- 스프링 컨테이너에서 관리하고있는 객체를 주입해준다.
- 생성자 인젝션, Setter 인젝션 두가지 종류가 있다.

## AOP

- Aspect Oriented Programming

- IoC가 결합도와 관련된 기능이라면 AOP는 응집도와 관련된 기능

  

- 핵심개념 : 관심 분리

- 비즈니스 로직 외 부가적인 기능들이 들어간 로직들을 횡단 관심이라고 한다.

- 이에 반해 사용자의 요청에 실제 수행되는 핵심 비즈니스 로직을 핵심관심 이라고 한다.

- 이 두가지를 분리하고 관리하는 것이 AOP

  

- Aspectj repository를 pom.xml에 추가 후 xml에 관리 코드를 적어주면 된다.

  

> ## 관련용어
>> ### 조인포인트 (Joinpoint)
>>- 클라이언트가 요청하는 모든 비즈니스 메서드

  

>>### 포인트컷(Pointcut)
>>- 필터링된 조인포인트
>>- 공통관심과 무관한 메서드에 대해서 동작하지 않게하는 것

  

>>### 어드바이스(Advice)
>>- 횡단관심에 해당하는 공통기능의 코드를 의미하며, 독립된 클래스의 메서드로 작성
>>- 어드바이스로 구현된 메서드가 언제 동작할지 스프링 설정파일로 지정가능

  

>>### 위빙(Weaving)
>>- 포인트컷으로 지정한 핵심 관심 메서드가 호출될 때, 횡단관심 메서드가 삽입되는 과정

  

>### 애스팩트(Aspec) 또는 어드바이저(Advisor)
>>- Aspect = Pointcut + Advice
>>- 어떤 포인트컷 메서드에 대해서 어떤 어드바이스 메서드를 실행할지 결정

  

>## AOP 엘리먼트(설정)

>>### \<aop:config>
>>- 루트 엘리먼트, 여러번 사용가능
>>- 하위 엘리먼트로는 \<aop:pointcut>,  \<aop:aspect>

>>### \<aop:pointcut>
>>- 포인트컷을 지정하기 위해 사용
>>- 여러 개 사용 가능

>>### \<aop:aspect>
>>- 포인트컷에 해당하는 메서드와 어드바이스 메서드를 결합하기 위해 사용
>>- 어떻게 결합하느냐에 따라 위빙 결과가 달라지므로 **가장 중요한 설정**

>## 포인트컷 표현식
>### 기본 형식
>- ex) execution(* com\.multicampus\.biz\. \.*impl.get*(.\.)) 
>> ### 리턴타입
>>- \*  -> 모든 리턴타입 허용
>>- void -> 리턴타입이 void인 메서드 선택
>>- !void -> 리턴타입이 void가 아닌 메서드 선택

>> ### 패키지 지정
>>- com.springbook.biz -> 정확하게 패키지 com.springbook.biz만 선택
>>- com.springbook.biz.\. -> com.springbook.biz로 시작하는 모든 패키지
>>- com.springbook.\. impl -> com.springbook 로 시작하면서 impl로 끝나는 패키지

>> ### 클래스 지정
>>- BoardServiceImpl -> 정확하게 BoardServiceImpl 클래스 선택
>>- *Impl -> 클래스 이름이 Impl로 끝나는 클래스만 선택
>>- BoardService+ -> 클래스 이름 뒤에 +가 붙으면 해당 클래스로부터 파생된 모든 자식 클래스 선택

>>### 메서드 지정
>>- *(.\.) -> 가장 기본 설정으로 모든 메서드 선택
>>- get*(.\.) -> 메서드 이름 앞에 get이 붙으면 다 선택

>>### 매개변수 지정
>>- (.\.) -> 가장 기본 설정으로 개수와 타입에 제약이 없음
>>- (*) -> 반드시 1개의 매개변수를 가지는 메서드만
>>- (com.springbook.user,UserVO) -> 매개변수가 UserVO인 애만
>>- (!com.springbook.user.UserVO) -> 아닌 애만
>>- (Integer, .\.) -> 한개 이상의 매개변수, 첫번째가 integer여야함
>>- (Integer, *) -> 반드시 두개의 매개변수, 첫번째가 integer

## Model
- 데이터베이스 연동 로직을 제공하면서 DB에서 검색한 데이터가 저장되는 자바 객체

## Command 객체
- 커맨드 객체란 클라이언트가 보내주는 파라미터가 자동으로 담겨서 반환되는 객체를 말한다. 이는 자동 객체 변환이라는 말로도 이해할 수 있는데 MVC에서 가장 큰 핵심 기술 중에 하나라고도 이야기 할 수 있다.

## @ModelAttribute
- 1.커맨드 객체의 이름을 바꿔주고 싶을 때에도 사용
    - 메서드의 파라미터에 적어준다 ex) (@ModelAttribute("user") UserVO vo)
- 2. View에서 사용할 데이터를 설정하는 용도로도 사용
    - @ModelAttribute는 @RequestMapping 보다 먼저 호출된다. 

## @RequestParam
- 파라미터 이름을 바꿔줄 수 있고 기본값 설정, 생략여부를 결정

## @SessionAttribute
- 수정작업을 처리할 때 사용.
- 정보가 전달되지 않았을때 null이 되는것을 방지한다.
- View에 뿌려져있는 값을 Session에도 저장하고 컨트롤러를 거치고와서 수정된 값만 바꾸어줌.

## SQL Injection
- Web hacking 기법중 하나
- Database 질의 하는 과정사이에 악의적인 의도를 갖는 구문을 삽입하여 공격자가 원하는 SQL쿼리문을 실행하는 기법

- 3가지 종류
    - 인증 우회 (AB : Auth Bypass)
    - 데이터 노출(DD : Data Disclosure)
    - 원격명령 실행(RCE : Remote Command Execute)

- 방어 방법 
    - SQL Injection의 경우 값을 입력받을 때 특수문자 여부를 검사하여 방어
    - SQL서버에 오류가 발생했을 시 해당하는 에러메시지를 표시하면 안됨.
    - Statemente 대신 PreparedStatement를 사용 Preparedstatement는 특수문자를 자동으로 escaping해줌
    - 클라이언트, 서버 두가지 Validation이 필요
    - Hash function 사용 : 무조건 SHA-256 이상의 보안성을 갖는 해시함수로 해싱한 뒤 DB저장